<!DOCTYPE html>
<!--
Copyright 2015 Google Inc. All Rights Reserved.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html>

<head>
  <title>Club Selecta</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Desactivar zooming en m贸viles -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <!-- Web Application Manifest -->
  <link rel="manifest" href="manifest.json">

  <!-- Chrome / Android -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#171733">
  <!-- Color de la barra -->
  <link rel="icon" sizes="72x72" href="images/touch/icon-72x72.png">
  <link rel="icon" sizes="192x192" href="images/touch/chrome-touch-icon-192x192.png">

  <!-- Safari / iOS -->
  <meta name="apple-mobile-web-app-title" content="Club Selecta">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="apple-touch-icon" href="images/touch/apple-touch-icon.png">

  <!-- Tile color for Win8/10 -->
  <meta name="msapplication-TileColor" content="black">
  <meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">

  <script src="is.js"></script>

  <link rel="stylesheet" type="text/css" href="addtohomescreen.css">
  <script src="addtohomescreen.js"></script>
  <script>
    var addtohome = addToHomescreen({
      //skipFirstVisit: true,
      debug: true,
      displayPace: 0,
      //maxDisplayCount: 1,
      autostart: false
    });

    window.addEventListener('load', function() {
      var native_addToHome = false;
      var outputElement = document.getElementById('output');
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js', {
          scope: './'
        })
        .then(function(r) { //Service worker registrado
          if (is.android() && (is.chrome() || is.opera())) {
            outputElement.textContent = 'Your browser is supported :D';
            native_addToHome = true;
          }else{
            outputElement.textContent = 'No install banner support :(';
            addtohome.show();
          }
        })
        .catch(function(whut) {
          console.error('uh oh... ');
          console.error(whut);
        });
      }

      if(native_addToHome == false){
        outputElement.textContent = 'Showing the alternative banner';
        addtohome.show();
      }

      window.addEventListener('beforeinstallprompt', function(e) {
        outputElement.textContent = 'Service Worker listo';
        e.userChoice.then(function(choiceResult) {
          if (choiceResult.outcome == 'dismissed') {
            outputElement.textContent = 'El usuario cerr贸 el banner de agregar al homescreen';
          } else {
            outputElement.textContent = 'El usuario agreg贸 la aplicaci贸n al homescreen';
          }
        });
      });
    });
  </script>
</head>

<body>
  <h1>Hello world</h1>
  <h3 id="output"></h3>
</body>
</head>
